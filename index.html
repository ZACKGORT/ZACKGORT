<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>UX is dead - Zack Gort</title>

    <!-- Meta / social -->
    <meta
      name="description"
      content="Zack Gort — product/UX designer. Case studies: #fintech #ecommerce #designsystems #etc"
    />
    <meta property="og:title" content="UX is dead — Zack Gort" />
    <meta
      property="og:description"
      content="Design systems, data refactors, and ecommerce that moves the needle."
    />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://i.ibb.co/cSQCgNQY/work1.webp" />
    <meta name="theme-color" content="#0e0d0e" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    

    <!-- GSAP core + plugins (deferred) -->
    <script src="https://unpkg.com/gsap@3/dist/gsap.min.js" defer></script>
    <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js" defer></script>
    <script src="https://unpkg.com/gsap@3/dist/Physics2DPlugin.min.js" defer></script>

    <!-- ImagesLoaded (deferred) -->
    <script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js" defer></script>

    <!-- Lenis smooth scroll (deferred) -->
    <script src="https://unpkg.com/@studio-freight/lenis/dist/lenis.min.js" defer></script>

    <!-- Fonts (deduped preconnect + combined family request) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Instrument+Sans:ital,wght@0,400..700;1,400..700&family=Instrument+Serif:ital@0;1&display=swap"
      rel="stylesheet"
    />

    <style>
      /* =========================================================
                     TOKENS / RESET
                     ========================================================= */
      *,*::before,*::after { box-sizing:border-box; }
      :root {
        --font-sans:"Instrument Sans",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji",sans-serif;
        --font-serif:"Instrument Serif",ui-serif,Georgia,Cambria,"Times New Roman",serif;
      }
      :root {
        /* Canvas */
        --bg:#000;
        --color-bg:#0e0d0e;
        --color-bg-content:#0e0d0e;
        --color-bg-frame:#FF8DA1;
        --brand-pink:var(--color-bg-frame);
        /* Text & UI */
        --color-text:#f5f3ee;
        --color-text-alt:#d7d4cd;
        --color-label:#fff;
        --color-link:#fff;
        --color-link-hover:#fff;
        --color-border:#46443e;
        /* Layout */
        --page-padding:.75rem;
        --grid-gap:var(--page-padding);
        /* Effects */
        --cursor-size:28px;
        /* Blur overlay */
        --layers:1; /* from 5 */
        --blur-max:24;
        --mask-stop:35;
        /* Panel palette */
        --cs-accent:#f4d35e;
        --cs-deep:#000;
        --cs-warm:#f95738;
        --cs-soft:#ebebd3;
        --cs-ink:#2c241a;
        /* Typography defaults */
        --fs-xxs:12px;
        --fs-body:18px;
        /* Z */
        --z-blur:10000;
        --z-footer:10020;
        --z-ui: 10050;
        --z-tooltip: 40000;
      }
      html,body { width:100%; overflow-x:hidden; }
      html { font-size:var(--fs-body); }
      body {
        margin:0;
        color:var(--color-text);
        background:var(--color-bg);
        font-family:var(--font-sans);
        font-variation-settings:"slnt" 0,"wdth" 100,"wght" 450,"INKT" 0;
        font-weight:450;
        line-height:1.5;
        -webkit-font-smoothing:antialiased;
        -moz-osx-font-smoothing:grayscale;
      }
      html, body { overscroll-behavior-y: auto !important; }
      #app { overscroll-behavior: auto !important; }
      
      /* Links & buttons — global pink hover + fx-2 underline */
      a { position:relative; color:var(--color-link); text-decoration:none; outline:none; cursor:pointer; }
      a:hover,a:focus-visible { color:var(--brand-pink); }
      a::after {
        content:""; position:absolute; left:0; bottom:0; width:100%; height:2px; background:currentColor;
        transform-origin:0% 50%; transform:scale3d(0,1,1);
        transition:transform .2s cubic-bezier(.390,.575,.565,1);
      }
      a:hover::after,a:focus-visible::after { transform:scale3d(1,1,1); }
      a:focus { outline:none; }
      a:focus:not(:focus-visible){ outline:none; }
      a:focus-visible { outline:2px solid var(--brand-pink); outline-offset:2px; }
      a.no-underline::after { display:none; }
    
      /* Skip link */
      .skip-link {
        position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden;
      }
      .skip-link:focus {
        position:fixed; left:12px; top:12px; width:auto; height:auto; background:#000; color:#fff;
        padding:.5rem .75rem; border-radius:6px; z-index:10005;
      }
    
      /* Nav/Frame links (enable underline-on-hover, keep color white on hover) */
      nav a,.frame__links a,.frame__tags a { color:var(--color-link); text-transform:uppercase; }
      nav a:hover,nav a:focus-visible,
      .frame__links a:hover,.frame__links a:focus-visible,
      .frame__tags a:hover,.frame__tags a:focus-visible { color:var(--color-link); }
      nav a:focus-visible,.frame__links a:focus-visible,.frame__tags a:focus-visible { outline:2px solid currentColor; outline-offset:2px; }
      
      /* Microtype */
      .cdawrap,.page-footer,.project__label { font-size:var(--fs-xxs); text-transform:uppercase; letter-spacing:.06em; font-weight:400; color:var(--color-label); }
      .type-tiny { font-size:var(--fs-xxs); text-transform:none; line-height:1.8em; letter-spacing:.06em; font-weight:400; color:var(--color-label); }
      .type-tiny.right.end { text-align:left; max-width:364px; margin-inline-start:auto; padding-left:1.5rem; }
      a + a { margin-inline-start:.6rem; }
      .links--spaced { display:flex; flex-wrap:wrap; column-gap:clamp(.5rem,1.2vw,1rem); row-gap:.35rem; }
      .frame__links{ display:flex; flex-wrap:wrap; gap:.35rem clamp(.5rem,1.2vw,1rem); }
      .frame__links a{ display:inline-flex; align-items:center; padding:.25rem .55rem; border-radius:.35rem; }
      
      /* Loader */
      .js .loading::before,.js .loading::after { content:""; position:fixed; z-index:1000; }
      .js .loading::before { inset:0; background:var(--color-bg); }
      .js .loading::after {
        top:50%; left:50%; width:60px; height:60px; margin:-30px 0 0 -30px; border-radius:50%; opacity:.4;
        background:var(--color-link); animation:loaderAnim .7s linear infinite alternate forwards;
      }
      @keyframes loaderAnim { to { opacity:1; transform:scale3d(.5,.5,1); } }
      
      /* Frame/Hero */
      .frame {
        padding:var(--page-padding); position:relative; display:grid; grid-row-gap:.5rem; grid-column-gap:2rem; justify-items:start; align-content:start;
        line-height:1; min-height:100svh; background:var(--color-bg-frame); text-transform:uppercase;
        grid-template-columns:auto auto; grid-template-rows:auto auto auto 1fr;
        grid-template-areas:
          "logo"
          "tags"
          "sponsor"
          "subline"
          "title";
      }
      .frame #cdawrap{ justify-self:start; }
      .frame__logo{ grid-area:logo; padding-bottom:.15rem; font-size:1.5rem; font-family:var(--font-sans); }
      .frame__tags{ grid-area:tags; }
      .frame__links{ grid-area:sponsor; }
      .frame__subline{ grid-area:subline; }
      .frame__title{
        grid-area:title; white-space:nowrap; font-size:clamp(2rem,20vw,20rem); margin:0; letter-spacing:-.05em; padding-top:.15em;
        font-weight:400; line-height:.55; text-indent:-.065em; word-spacing:.15em; font-family:var(--font-sans);
      }
      .frame__title sup.title-sup{ font-size:.35em; line-height:0; display:inline-block; vertical-align:baseline; transform:translateY(-.6em); letter-spacing:.04em; color:var(--color-text-alt); }
      
      /* Content */
      .content{ position:relative; min-height:100dvh; background:var(--color-bg-content); align-content:center; }
      .content--padded{ padding:var(--page-padding); }
      .content--cutoff{ overflow:hidden; }
      .content--full{ display:grid; place-items:center; grid-template-areas:"main"; grid-template-rows:100%; grid-template-columns:100%; min-height:100svh; }
      
      /* Titles */
      .content__title{ grid-area:main; position:relative; display:flex; flex-direction:column; text-align:center; margin:4rem 0 2rem; }
      .content__title-main{ font-size:clamp(2rem,7vw,4.5rem); line-height:1; margin:.5rem 0 0; font-weight:500; font-variation-settings:"wght" 500; text-wrap:balance; letter-spacing:-.025em; }
      .content__title-main + p{ margin:0; max-width:100px; font-size:var(--fs-xxs); letter-spacing:.04em; color:var(--color-label); }
      .content__text{ font-size:clamp(1.1rem,2.8vw,1.7rem); line-height:1.4; font-weight:400; letter-spacing:0; color:var(--color-text); margin:.6rem 0; text-wrap:balance; }
      
      /* Grid system */
      .grid{ grid-area:main; display:grid; width:100%; height:100%; grid-template-columns:repeat(8,1fr); grid-template-rows:1fr 1fr 1fr; margin-bottom:1em; }
      .grid--spaced{ gap:var(--grid-gap); }
      .grid--columns{ grid-template-columns:repeat(5,1fr); grid-template-rows:repeat(2,min-content); align-content:center; }
      .grid--zoomed{ gap:2rem; grid-template-columns:repeat(3,70%); grid-template-rows:repeat(3,60%); justify-content:center; align-content:center; aspect-ratio:2/1; }
      .grid--single{ height:auto; justify-self:center; }
      .grid--column{ grid-template-columns:repeat(15,calc((100% - 14 * 10px) / 15)); gap:10px; grid-auto-rows:auto; }
      .grid--small{ grid-template-columns:repeat(9,1fr); grid-auto-rows:1fr; }
      .grid--tiny{ height:60vh; grid-template-columns:repeat(14,1fr); grid-auto-rows:auto; }
      .grid--wide{ grid-template-columns:repeat(5,1fr); grid-template-rows:repeat(4,1fr); }
    
    
      
      /* Let content sections that have a grid-head reserve a top row for the title */
      .content--full.has-grid-head{
        display:grid;
        grid-template-rows:auto 1fr;
        grid-template-areas:
          "head"
          "main";
        align-content:start;
      }
      .content--full.has-grid-head .grid-head{
        grid-area: head;
        align-self:start;
        position: sticky;
        top: var(--page-padding);
        z-index: 2;
        margin-bottom: .5rem;
      }
      
      /* Tiles */
      .grid__img,.grid__item{ width:100%; min-height:200px; background-size:cover; background-position:50% 50%; pointer-events:none; will-change:transform; }
      .grid__img{ position:relative; overflow:hidden; }
      .grid__img-inner{ position:absolute; inset:0; width:100%; height:100%; background-size:cover; background-position:50% 50%; will-change:transform; }
      .grid__item{ display:flex; flex-direction:column; justify-content:center; padding:.5rem; }
      .grid-head__title { margin:.25rem 0 .5rem; }

      
      /* Helpers */
      .ar-wide{ aspect-ratio:4/3; } .ar-narrow{ aspect-ratio:2/3; } .ar-rect{ aspect-ratio:1; }
      .span-2{ grid-column:auto / span 2; } .span-3{ grid-column:auto / span 3; }
      .center{text-align:center;} .right{text-align:right;} .end{align-self:end;} .acenter{align-self:center;}
      
      /* Work grid: only H4 link clickable */
      #work .grid__item{ pointer-events:none; }
      #work .grid__item .title-link{ pointer-events:auto; text-decoration:none; }
      #work .grid__item .title-link:hover{ text-decoration:underline; }
      
      /* Project blocks */
      .project{ padding:1rem; max-width:1000px; margin:20vh auto; display:grid; grid-column-gap:7vw; grid-row-gap:.5rem; }
      .project--intro{ grid-template-columns:1fr; grid-template-areas:"label-name" "name" "label-date" "date" "title" "label-mission" "mission"; }
      .project--details{ grid-template-areas:"label-default" "paragraph"; grid-template-columns:1fr; }
      .project--left{ justify-content:start; } .project--right{ justify-content:end; }
      .project--details p{ grid-area:paragraph; max-width:400px; }
      .project__label--default{ grid-area:label-default; }
      .project p,.grid__item p{ font-size:1rem; line-height:1.4; margin:0; color:var(--color-text-alt); }
      .project__label--name{ grid-area:label-name; }
      .project__label--date{ grid-area:label-date; }
      .project__label--mission{ grid-area:label-mission; }
      .project__name{ grid-area:name; }
      .project__date{ grid-area:date; }
      .project__mission{ grid-area:mission; line-height:1.4; }
      .project__mission p{ color:var(--color-text-alt); }
      .project__title{ grid-area:title; font-size:clamp(2rem,13vw,8rem); font-weight:400; margin:10vh 0; line-height:1; }
      .project__heading{ color:var(--color-label); font-weight:inherit; font-size:inherit; margin:0; }
      
      /* 2-up process wrapper */
      [id$="-process"]{ display:grid; grid-template-columns:1fr; gap:2rem 3rem; align-items:start; }
      [id$="-process"] > .project{ margin:0; padding:0; }
      [id$="-process"] .project--details p{ max-width:none; }
      [id$="-process"] .project__label{ letter-spacing:.04em; text-transform:uppercase; opacity:.85; }
      #fintech-process .project__label,#ecommerce-process .project__label{
        font-weight:700; font-variation-settings:"slnt" 0,"wdth" 100,"wght" 700,"INKT" 0;
      }
      
      /* Intro helper note */
      .intro__info{ position:fixed; left:50%; bottom:clamp(12px,4vh,32px); transform:translateX(-50%); z-index:1000; font-size:var(--fs-xxs); letter-spacing:.08em; text-transform:uppercase; opacity:.75; pointer-events:none; }
      
      /* Intro section */
      .intro{ min-height:100vh; display:grid; place-items:center; padding:var(--page-padding); background:linear-gradient(0deg,transparent,var(--color-bg-content)); }
      .intro__title{ margin:0; line-height:.9; text-align:center; font-weight:400; }
      .intro__title-pre{ font-weight:300; font-size:clamp(2rem,8vw,5rem); color:var(--color-text); text-transform:uppercase; }
      .intro__title-sub{ font-size:clamp(1.5rem,20vw,8rem); max-width:15ch; margin:0 auto; }
      
      /* Skills layout */
      #skills .trio-col{ display:flex; flex-direction:column; align-items:flex-start; }
      #skills .trio-col .skills-link{ margin:.15rem 0 0; }
      #skills .trio-col .skills-link + .skills-link{ margin-inline-start:0; }
      
      /* Stacked galleries */
      .stacked-section{ position:relative; z-index:0; isolation:auto; contain:layout style; }
      .content--full.stacked-section{ display:block; height:auto; min-height:0; }
      .stacked-gallery{ display:grid; justify-items:center; }
      .stacked-img{ width:min(1400px,90vw); margin-inline:auto; }
      .stacked-img img{ display:block; width:100%; height:min(88vh,900px); object-fit:cover; object-position:center center; backface-visibility:hidden; transform:translateZ(0); -webkit-transform:translateZ(0); }
      
      /* Fintech insight */
      #fintech-insight{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:2rem 3rem; align-items:start; padding:var(--page-padding); }
      #fintech-insight .project.project--details{ margin:0; padding:0; display:block; }
      #fintech-insight .project--details p{ max-width:none; }
      #fintech-insight .project__label{ letter-spacing:.04em; text-transform:uppercase; opacity:.85; }
      
      /* Discovery grid (BNY + GNC use identical layout) */
      #fintech-discovery .grid.grid--zoomed,
      #ecommerce-discovery .grid.grid--zoomed{
        width:100vw; max-width:100vw; margin-inline:auto; gap:var(--grid-gap);
        grid-template-columns:repeat(3,1fr); grid-template-rows:repeat(3,minmax(0,1fr)); aspect-ratio:auto;
      }
      
      /* Seventh grid padding tweak */
      [data-grid-seventh] .grid__item.span-3{ padding-block:1.5rem; }
      
      /* Footer */
      .page-footer{
        padding:var(--page-padding); display:grid; width:100%; grid-row-gap:1rem; grid-column-gap:2rem; justify-items:start; margin-top:40vh;
        grid-template-columns:auto; justify-content:space-between; position:relative; z-index:var(--z-footer);
      }
    
      /* Bottom blur overlay */
      .blur{ position:fixed; inset:0; z-index:var(--z-blur); pointer-events:none; opacity:0; transition:opacity .35s ease; }
      .blur.is-visible{ opacity:1; }
      .blur > div{ position:absolute; inset:0; }
      .blur > div::after{
        content:""; position:absolute; inset:0 -250%;
        -webkit-backdrop-filter:blur(var(--blur,24px)) saturate(var(--saturate,0));
        backdrop-filter:blur(var(--blur,24px)) saturate(var(--saturate,0));
        -webkit-mask:linear-gradient(180deg,transparent 0 var(--maskStart,75%),#000 100%);
        mask:linear-gradient(180deg,transparent 0 var(--maskStart,75%),#000 100%);
      }
      .pin-spacer,.pin-spacer > *{ z-index:auto !important; }
      
      /* Gooey cursor */
      .gooey-cursor{ position:fixed; inset:0; z-index:10004; pointer-events:none; filter:url(#gc-goo); mix-blend-mode:difference; }
      .gooey-cursor .gc-dot{ position:absolute; width:var(--cursor-size,28px); height:var(--cursor-size,28px); border-radius:50%; background:#fff; transform:translate(-50%,-50%); transform-origin:50% 50%; will-change:transform,width,height,opacity; opacity:.95; }
      .gooey-cursor,.gooey-cursor *{ pointer-events:none; }
      
      /* Typography special (fixed) */
      .heading-chant{
        display:inline-flex; align-items:flex-start; gap:.35ch; margin:clamp(.5rem,1.2vh,1rem) 0;
        font-family:var(--font-sans); font-weight:500; letter-spacing:-.01em; line-height:.95; font-size:clamp(3.4rem,6vw,3.4rem);
        color:var(--color-text); text-decoration:none; text-decoration-thickness:.08em; text-underline-offset:.12em;
        text-decoration-color:color-mix(in oklab,var(--color-text) 45%,transparent);
      }
      .heading-chant sup{ font-size:.35em; line-height:0; margin-left:.3ch; letter-spacing:.04em; color:var(--color-text-alt); vertical-align:baseline; transform:translateY(-.6em); }
      
      /* Confetti trigger */
      .heading-chant .confetti-sup{ position:relative; display:inline-flex; align-items:flex-start; cursor:pointer; user-select:none; margin-left:.3ch; padding:0 .2ch; border-radius:.25rem; outline:0; transition:color .18s ease,text-decoration-color .18s ease; }
      .heading-chant .confetti-sup:focus-visible{ outline:2px solid rgba(255,255,255,.65); outline-offset:2px; }
      .heading-chant .confetti-sup .emitter{ position:absolute; top:0; left:50%; width:0; height:0; color:var(--brand-pink); text-decoration-color:currentColor; transform:translate(-50%,-60%); pointer-events:none; overflow:visible; z-index:2; }
      .heading-chant .confetti-sup .emitter > div{ position:absolute; width:8px; height:8px; background:var(--b,#fff); border-radius:2px; will-change:transform,opacity; mix-blend-mode:normal; }
      :root { --confetti-colors:#FFFF04,#EA4C89,#892AB8,#4AF2FD; }
      .heading-chant .confetti-sup:hover,.heading-chant .confetti-sup:active,.heading-chant .confetti-sup:focus-visible{ color:var(--brand-pink); text-decoration:underline; text-decoration-thickness:.08em; text-underline-offset:.12em; text-decoration-color:currentColor; }
      
      /* Title system (unified look) */
      :root { --title-size-d:clamp(3rem,6vw,4rem); --title-size-m:clamp(2rem,8.5vw,2.6rem); }
      .heading-chant,.content__title-main,[id$="-process"] .project--intro .project__title{
        display:inline-flex; align-items:flex-start; gap:.35ch; margin:clamp(.5rem,1.2vh,1rem) 0; font-family:var(--font-sans); font-weight:500; letter-spacing:-.01em; line-height:.95; color:var(--color-text); text-decoration:none; text-decoration-thickness:.08em; text-underline-offset:.12em; text-decoration-color:color-mix(in oklab,var(--color-text) 45%,transparent); text-transform:none;
      }
      .heading-chant,.content__title-main,.grid-head__title{ font-size:var(--title-size-d); }
      .heading-chant sup,.content__title-main sup,.grid-head__title sup,[id$="-process"] .project--intro .project__title sup{
        font-size:.35em; line-height:0; margin-left:.3ch; letter-spacing:.04em; color:var(--color-text-alt); vertical-align:baseline; transform:translateY(-.6em);
      }
      
      /* Blackout tooltip + blur variant */
      .blackout{ color: transparent; background: #fff; padding: 0 .15em; border-radius: 2px; -webkit-box-decoration-break: clone; box-decoration-break: clone; }
      .blackout.tip{ position: relative; cursor: help; }
      .blackout.tip::after{
        content: attr(data-tip); position: absolute; top: calc(100% + 10px); left: 50%; transform: translate(-50%, 4px);
        background: rgba(0,0,0,.85); color: #fff; padding: .85rem 1rem; border-radius: 0;
        --padL: max(12px, env(safe-area-inset-left, 0px)); --padR: max(12px, env(safe-area-inset-right, 0px));
        max-width: calc(100vw - (var(--padL) + var(--padR))); width: min(420px, calc(100vw - (var(--padL) + var(--padR))));
        text-align: left; line-height: 1.45; white-space: normal; box-shadow: 0 12px 28px rgba(0,0,0,.45);
        opacity: 0; pointer-events: none; z-index: var(--z-tooltip); transition: opacity .18s ease, transform .18s ease;
      }
      .blackout.tip::before{
        content: ""; position: absolute; top: 100%; left: 50%; width: 10px; height: 10px; background: rgba(0,0,0,1);
        transform: translate(-50%, -2px) rotate(45deg); opacity: 0; z-index: calc(var(--z-tooltip) + 1); transition: opacity .18s ease;
      }
      .blackout.tip:hover::after,.blackout.tip:focus-visible::after{ opacity: 1; transform: translate(-50%, 0); }
      .blackout.tip:hover::before,.blackout.tip:focus-visible::before{ opacity: 1; }
      .blackout.blackout--blur{ color: inherit; background: rgba(0,0,0,0); position: relative; }
      .blackout.blackout--blur > span{ display: inline-block; filter: blur(var(--blur-amt,4px)); transition: filter .18s ease; }
      .blackout.blackout--blur:hover > span{ --blur-amt: .5px; }
      .blackout.blackout--blur[data-reveal="1"] > span,.blackout.blackout--blur:focus-within > span{ --blur-amt: 0; }
      .blackout.blackout--blur > span::selection{ background: rgba(255,255,255,.25); color: inherit; }
      .blackout.tip.tip--full::after{ position: absolute !important; top: calc(100% + 10px) !important; left: 50% !important; right: auto !important; margin-right: 1em; transform: translate(-50%, 0) !important; width: min(320px, calc(100vw - (var(--padL) + var(--padR)))) !important; max-width: calc(100vw - (var(--padL) + var(--padR))) !important; }
      .blackout.tip.tip--full::before{ position: absolute !important; top: 100% !important; left: 50% !important; right: auto !important; transform: translate(-50%, -2px) rotate(45deg) !important; }
      
      /* Aspect-ratio guard */
      @media (max-aspect-ratio:16/9) { .grid:not(.grid--zoomed){ width:100%; height:auto; aspect-ratio:16/9; } }
      
      /* Mobile tuning */
      @media (max-width:768px){
        :root{ font-size:15px; --page-padding:1rem; --grid-gap:.75rem; --blur-max:18; --mask-stop:20; --saturate:0; }
        .blur.bf-reset > div::after{ -webkit-backdrop-filter:none !important; backdrop-filter:none !important; }
        .frame{ height:auto; grid-template-columns:1fr; grid-template-rows:auto auto auto auto 1fr; grid-row-gap:1rem; align-content:start; padding:var(--page-padding); }
        .frame__title{ font-size:clamp(2.25rem,16vw,7rem); line-height:.8; }
        .frame__subline{ order:3; }
        .frame__links a{ display:inline-block; padding:.25rem 0; }
        .content--padded{ padding:var(--page-padding); }
        .content__title{ margin:2.5rem 0 1rem; }
        .content__text{ font-size:clamp(1.05rem,4.3vw,1.25rem); }
        #work{ margin-bottom:clamp(4rem,12vh,8rem); }
        #work .content__title-main{ margin-bottom:3rem; }
        .grid{ grid-template-columns:repeat(2,1fr); grid-auto-rows:minmax(140px,auto); gap:var(--grid-gap); height:auto; width:100%; }
        .grid__img,.grid__item{ min-height:140px; }
        .grid--column{ grid-template-columns:repeat(6,1fr); grid-auto-rows:minmax(140px,auto); gap:var(--grid-gap); }
        .grid--zoomed{ grid-template-columns:repeat(2,1fr); grid-template-rows:auto; aspect-ratio:auto; gap:var(--grid-gap); }
        .grid--wide{ grid-template-columns:repeat(2,1fr); grid-template-rows:auto; }
        [data-grid-ninth]{ grid-template-columns:repeat(2,1fr); }
        #work .grid{ grid-template-columns:repeat(2,1fr); }
        #work .grid__item{ padding:.75rem; }
        #work .grid__item h4{ font-size:.85rem; }
        .ar-wide,.ar-narrow,.ar-rect{ aspect-ratio:auto; }
        section.content:has(.grid[data-grid-ninth]){ margin-bottom: clamp(6rem, 18vh, 22rem); }
        @supports not (selector(:has(*))){ .grid[data-grid-ninth]{ margin-bottom: clamp(6rem, 18vh, 22rem); } }
        .grid-caption{ position: relative; z-index: 2; }
        .project{ margin:12vh auto; grid-column-gap:1.25rem; }
        .project__title{ font-size:clamp(1.8rem,11vw,3.2rem); margin:6vh 0 4vh; }
        .project--details p{ max-width:none; }
        [id$="-process"]{ grid-template-columns:1fr; gap:1.25rem; }
        .intro__info{ bottom:16px; font-size:10px; opacity:.65; }
        .page-footer{ grid-template-columns:1fr; gap:.5rem; margin-top:20vh; }
        .stacked-img img{ width:100%; height:auto !important; object-fit:contain !important; object-position:center; }
        /* Discovery grid mobile override (BNY + GNC) */
        #fintech-discovery .grid.grid--zoomed,
        #ecommerce-discovery .grid.grid--zoomed{
          grid-template-columns:repeat(2,1fr);
          grid-template-rows:auto;
        }
        .blackout.tip::after{ top:calc(100% + 10px); left:50%; transform:translate(-50%,0); width:min(92vw,420px); padding:.6rem .75rem; font-size:16px; line-height:1.45; text-align:left; white-space:normal; }
        .blackout.tip::before{ top:100%; left:50%; transform:translate(-50%,-2px) rotate(45deg); }
        .blackout.tip:hover::after,.blackout.tip:focus-visible::after{ transform:translate(-50%,4px); }
        .frame__links{ gap:.25rem .6rem; }
        .frame__links a{ padding:.2rem .45rem; }
      }
      
      /* Tiny devices */
      @media (max-width:390px){
        :root{ font-size:14px; }
        .grid__img,.grid__item{ min-height:100px; padding-bottom:.5rem; }
      }
      
      /* Desktop enhancements */
      @media (min-width:53em){
        :root{ --page-padding:1rem; }
        .frame{
          grid-template-columns:20% 1fr 1fr; grid-template-rows:min-content 1fr auto; grid-row-gap:15vh; align-items:center;
          grid-template-areas:"logo tags sponsor" "... ... subline" "title title title";
        }
        .frame__links{ margin-left:3rem; }
        .frame__subline{ align-self:end; }
        .frame__title{ align-self:end; }
        .frame #cdawrap{ text-align:right; max-width:250px; justify-self:end; }
        [id$="-process"]{ grid-template-columns:repeat(2,minmax(0,1fr)); }
        [id$="-process"] > .project.project--intro{ grid-column:1 / -1; }
        .page-footer{ grid-template-columns:repeat(3,auto); }
      }
      
      /* Pointer contexts */
      @media (pointer:fine){ html.has-cursor body,html.has-cursor a,html.has-cursor button{ cursor:none; } }
      @media (pointer:coarse){ .gooey-cursor{ display:none; } }
      
      /* Reduced motion */
      @media (prefers-reduced-motion:reduce){ .blur{ display:none; } }
      
      /* Feature queries */
      @supports not ((backdrop-filter:blur(1px)) or (-webkit-backdrop-filter:blur(1px))){
        .blur{ opacity:1; }
        .blur > div::after{
          -webkit-backdrop-filter:none; backdrop-filter:none;
          background:linear-gradient(180deg,rgba(0,0,0,0) 0,rgba(0,0,0,.35) 100%);
          -webkit-mask:none; mask:none;
        }
      }
      @supports selector(:has(*)){
        section.content:has(.grid[data-grid-seventh]){ margin-bottom:clamp(6rem,18vh,22rem); }
      }
      @media (max-width:768px){
        @supports selector(:has(*)){
          section.content:has(.grid[data-grid-seventh]){ margin-bottom:12vh; }
        }
      }
      .grid[data-grid-seventh]{ margin-bottom:clamp(6rem,18vh,22rem); }
      @media (max-width:768px){ .grid[data-grid-seventh]{ margin-bottom:12vh; } }
      @media (max-width:768px){
        .frame{ grid-template-rows:auto auto auto 1fr auto; align-content:stretch; padding-bottom:calc(100px + env(safe-area-inset-bottom,0px)); }
        .frame__title{ align-self:end; margin:0; }
      }
      
      /* Use the blur-section layout for fintech & ecommerce insight */
      #fintech-insight{ display:block; padding:var(--page-padding); }
      #fintech-insight .content__text p{ max-width:70ch; }
      #fintech-insight .content__text .type-tiny{ color:var(--color-label); }
      
      #ecommerce-insight{ display:block; padding:var(--page-padding); }
      #ecommerce-insight .content__text p{ max-width:70ch; }
      #ecommerce-insight .content__text .type-tiny{ color:var(--color-label); }
      
      /* Prefer dvh where available */
      @supports (height:100dvh){ .frame,.content--full{ min-height:100dvh; } }
      
      /* If backdrop-filter unsupported, use gradient */
      .blur.no-bf > div{ -webkit-backdrop-filter:none !important; backdrop-filter:none !important; background:linear-gradient(to top,rgba(0,0,0,.28),rgba(0,0,0,0) 60%); }
      
      /* MOBILE/TABLET:disable page blur entirely */
      @media (max-width:768px),(pointer:coarse){ .blur{ display:none !important; } }
      
      /* Skills hover (fx-2 style) */
      .skills-link{ position:relative; display:inline-block; cursor:pointer; text-decoration:none; color:var(--color-text); outline:0; }
      .skills-link span{ display:inline-block; white-space:normal; }
      .skills-link[data-fx="2"]::after{
        content:""; position:absolute; left:0; bottom:0; width:100%; height:2px; background:currentColor;
        transform-origin:0% 50%; transform:scale3d(0,1,1);
        transition:transform .2s cubic-bezier(.390,.575,.565,1);
      }
      .skills-link[data-fx="2"]:hover::after,.skills-link[data-fx="2"]:focus-visible::after{ transform:scale3d(1,1,1); }
      
      /* Skills grid */
      #skills .trio-grid{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:clamp(1rem,3vw,2rem); align-items:start; }
      @media (max-width:768px){ #skills .trio-grid{ grid-template-columns:1fr; } }
      
      /* Floating preview */
      .hover-reveal{
        position:fixed; top:0; left:0; width:220px; height:160px; pointer-events:none; opacity:0; z-index:10010;
      }
      .hover-reveal__inner,.hover-reveal__img{ position:relative; width:100%; height:100%; }
      .hover-reveal__deco{ position:absolute; inset:0; background:#181314; opacity:.18; }
      .hover-reveal__img{ background-size:cover; background-position:50% 50%; }
      @media (hover:none),(pointer:coarse){
        .hover-reveal{ display:block !important; width:min(46vw,280px); height:min(34vh,220px); }
      }
      
      /* --- UX is dead title override --- */
      .frame__title .ux-dead-jump{ color:var(--color-text); text-decoration:none; }
      .frame__title .ux-dead-jump:hover,.frame__title .ux-dead-jump:focus-visible{ color:var(--color-text); }
      .frame__title .ux-dead-jump::after{ display:none !important; }
      .frame__title .ux-dead-jump:focus-visible{ outline:2px solid currentColor; outline-offset:4px; border-radius:6px; }
      
      /* Nav tooltip */
      .nav-tip{ position:relative; }
      .nav-tip[data-tip]::after{
        content:attr(data-tip); position:absolute; left:50%; bottom:calc(100% + 8px); transform:translateX(-50%) translateY(4px);
        background:rgba(0,0,0,.8); color:#fff; font-size:var(--fs-xxs); letter-spacing:.06em; padding:.4rem .5rem; border-radius:6px; white-space:nowrap;
        opacity:0; pointer-events:none; transition:opacity .18s ease,transform .18s ease; z-index:10050;
      }
      .nav-tip[data-tip]::before{
        content:""; position:absolute; left:50%; bottom:calc(100% + 2px); transform:translateX(-50%) rotate(45deg);
        width:8px; height:8px; background:rgba(0,0,0,.8); opacity:0; transition:opacity .18s ease;
      }
      .nav-tip:hover::after,.nav-tip:focus-visible::after{ opacity:1; transform:translateX(-50%) translateY(0); }
      .nav-tip:hover::before,.nav-tip:focus-visible::before{ opacity:1; }
      @media (hover:none),(pointer:coarse){ .nav-tip[data-tip]::before,.nav-tip[data-tip]::after{ display:none !important; } }
      
      /* Tiny caption below galleries */
      .grid-caption{ margin:2rem auto 0; text-align:center; opacity:.85; max-width:1100px; }
    
      /* Scroll progress UI */
      .navigation{
        position:fixed;
        left:50%;
        bottom:clamp(40px,10vh,60px);
        transform:translateX(-50%);
        display:flex;
        align-items:center;
        gap:1.25rem;
        /* Ensure footer can appear above this */
        z-index:10000; /* footer uses 10020 in your vars */
        user-select:none;
        mix-blend-mode:normal;
        transition:opacity .18s ease, transform .18s ease;
      }
      .navigation.is-hidden{
        opacity:0;
        pointer-events:none;
        transform:translateX(-50%) translateY(6px);
      }
      .nav-text{
        font-size:var(--fs-xxs,12px);
        text-transform:uppercase;
        letter-spacing:.08em;
        opacity:.85;
        white-space:nowrap;
      }
      .nav-progress{
        width:6em;
        height:2px;
        background:rgba(255,255,255,.25);
        position:relative;
        overflow:hidden;
        border-radius:2px;
      }
      .nav-progress-fill{
  position:absolute;
  left:0; right:auto; top:0; bottom:0; /* or: inset:0; */
  width:100%;
  background:var(--color-text,#f5f3ee);
  transform-origin:left center;
  transform:scaleX(0);
  will-change:transform;
}

      @media (max-width: 768px){
        .navigation{ bottom:1.25rem; }
        .nav-progress{ width:64vw; max-width:360px; }
      }
    </style>
    
  </head>

  <body class="loading">
    <a class="skip-link" href="#about">Skip to content</a>
    <main id="app"></main>
    <div class="blur"></div>

<script>
/* app.js — Zack Gort — Layout Formation on Scroll + Skills fx-2 Hover Reveal (desktop hover + mobile tap) */
(function () {
  'use strict';

  // ---------------------------------------------------------------------------
  // Boot flags / vendor detection
  // ---------------------------------------------------------------------------
  document.documentElement.classList.add('js');
  const has = (k) => typeof window[k] !== 'undefined';

  if (has('ScrollTrigger')) {
    if (has('Physics2DPlugin')) {
      gsap.registerPlugin(ScrollTrigger, Physics2DPlugin);
    } else {
      gsap.registerPlugin(ScrollTrigger);
    }
  }

  const prefersReducedMotion = matchMedia('(prefers-reduced-motion: reduce)').matches;

  // ---------------------------------------------------------------------------
  // Tiny DOM helpers
  // ---------------------------------------------------------------------------
  const $ = (s, r = document) => r.querySelector(s);
  const $$ = (s, r = document) => Array.from(r.querySelectorAll(s));
  const el = (tag, cls, html) => {
    const n = document.createElement(tag);
    if (cls) n.className = cls;
    if (html != null) n.innerHTML = html;
    return n;
  };

  // ---------------------------------------------------------------------------
  // Bottom blur overlay layers + visibility rules
  // ---------------------------------------------------------------------------
  function buildBlurLayers(blur) {
    const cs = getComputedStyle(document.documentElement);
    const layers = +cs.getPropertyValue('--layers')?.trim() || 5;
    const blurMax = +cs.getPropertyValue('--blur-max')?.trim() || 40;
    const stopMax = +cs.getPropertyValue('--mask-stop')?.trim() || 15;

    let html = '';
    for (let i = 1; i <= layers; i++) {
      const t = i / layers;
      const blurPx = Math.sin((1 - t) * Math.PI / 2) * blurMax;
      const stop = Math.sin(t * Math.PI / 2) * stopMax;
      const topVh = (100 - stop).toFixed(3);
      html += `<div style="--i:${i}; --blur:${blurPx.toFixed(3)}px; --top:${topVh}vh"></div>`;
    }
    blur.innerHTML = html;
  }

  function initBlurOverlayVisibility() {
    let blur = document.querySelector('.blur');
    if (!blur) {
      blur = document.createElement('div');
      blur.className = 'blur';
      document.body.appendChild(blur);
    }
    if (!blur.children.length) buildBlurLayers(blur);

    const header = document.querySelector('.frame');

    const show = () => blur.classList.add('is-visible');
    const hide = () => blur.classList.remove('is-visible');

    if (header) {
      const ioHeader = new IntersectionObserver(
        ([e]) => e.isIntersecting ? hide() : show(), {
          threshold: 0,
          rootMargin: '0px 0px -60px 0px'
        }
      );
      ioHeader.observe(header);
    }

    if (header && header.getBoundingClientRect().bottom <= 0) show();

    window.addEventListener('resize', () => buildBlurLayers(blur), { passive: true });
  }

  // ---------------------------------------------------------------------------
  // Mobile/Android blur resiliency
  // ---------------------------------------------------------------------------
  function fixMobileBlurResume() {
    const blur = document.querySelector('.blur');
    const header = document.querySelector('.frame');

    const isAndroid = /Android/i.test(navigator.userAgent);
    let resumes = 0;
    const degradeKey = 'bfDegraded';
    let degraded = localStorage.getItem(degradeKey) === '1';

    function rebuildChildren() { if (blur) buildBlurLayers(blur); }
    function hardOff(on) { if (blur) blur.classList.toggle('bf-off', !!on); }

    function update() {
      if (!blur || !header) return;
      hardOff(true);
      rebuildChildren();

      blur.classList.add('bf-reset');
      void blur.offsetHeight;

      const shouldShow = header.getBoundingClientRect().bottom <= 0;
      blur.classList.toggle('is-visible', shouldShow);

      requestAnimationFrame(() => {
        blur.classList.remove('bf-reset');
        hardOff(false);
        if (window.ScrollTrigger) ScrollTrigger.refresh();
      });

      resumes++;
      if (!degraded && isAndroid && resumes >= 2) {
        degraded = true;
        localStorage.setItem(degradeKey, '1');
        blur.classList.add('no-bf');
      }
    }

    window.addEventListener('visibilitychange', () => {
      document.hidden ? hardOff(true) : setTimeout(update, 60);
    }, { passive: true });

    window.addEventListener('pagehide', () => hardOff(true), { passive: true });
    window.addEventListener('pageshow', () => setTimeout(update, 0), { passive: true });
    window.addEventListener('focus', () => setTimeout(update, 60), { passive: true });
    window.addEventListener('orientationchange', () => setTimeout(update, 120), { passive: true });
    window.addEventListener('resize', () => setTimeout(update, 60), { passive: true });

    update();
  }

  // ---------------------------------------------------------------------------
  // Smooth scrolling (Lenis) + anchor hash scrolling
  // ---------------------------------------------------------------------------
  function initSmooth() {
    const usingLenis = has('Lenis');

    if (has('ScrollTrigger')) {
      ScrollTrigger.normalizeScroll(!usingLenis);
    }
    if (!usingLenis) return;

    const isTouch = matchMedia('(pointer:coarse), (hover:none), (max-width: 768px)').matches;
    window.lenis = new Lenis({
      lerp: isTouch ? 0.22 : 0.15,
      smoothTouch: true,
      syncTouch: true,
    });

    window.lenis.on('scroll', () => { if (window.ScrollTrigger) ScrollTrigger.update(); });
    gsap.ticker.add((t) => window.lenis.raf(t * 1000));
    gsap.ticker.lagSmoothing(0);
  }

  function enableHashScroll() {
    document.addEventListener('click', (e) => {
      const a = e.target.closest('a[href^="#"]');
      if (!a) return;

      const id = a.getAttribute('href');
      if (!id || id.length < 2) return;

      const target = document.querySelector(id);
      if (!target) return;

      e.preventDefault();

      const settle = a.dataset.settle;

      const focusTarget = () => {
        target.setAttribute('tabindex', '-1');
        setTimeout(() => target.focus({ preventScroll: true }), 0);
      };

      // If caller wants to scroll to the end of a pinned section, do that
      if (settle === 'end' && window.ScrollTrigger) {
        const st = ScrollTrigger.getAll().find(st =>
          st && (st.pin === target || st.trigger === target || target.contains(st.pin) || target.contains(st.trigger))
        );
        if (st && isFinite(st.end)) {
          const y = st.end + 2;
          if (window.lenis) window.lenis.scrollTo(y, { duration: 1.1 });
          else window.scrollTo({ top: y, behavior: 'smooth' });

          focusTarget();
          // 🔑 Don’t write the hash
          clearSlug();
          return;
        }
      }

      // Regular smooth scroll path
      const y = target.getBoundingClientRect().top + window.pageYOffset;
      window.lenis ? window.lenis.scrollTo(y, { duration: 1 }) : window.scrollTo({ top: y, behavior: 'smooth' });

      focusTarget();
      // 🔑 Don’t write the hash
      clearSlug();
    });
  }

  // ---------------------------------------------------------------------------
  // Utilities
  // ---------------------------------------------------------------------------
  const preloadImages = (sel = 'img') =>
    new Promise(res => imagesLoaded(document.querySelectorAll(sel), res));

  function a11yifyGridImages() {
    document.querySelectorAll('.grid__img').forEach(el => {
      el.setAttribute('role', 'img');
      const url = el.dataset.bg || (el.style.backgroundImage || '').replace(/^url\(["']?/, '').replace(/["']?\)$/, '');
      const name = url.split('/').pop()?.split('.')[0] || '';
      el.setAttribute('aria-label', name.replace(/[-_]/g, ' ').trim() || 'Gallery image');
    });
  }

  function initLazyBackgrounds() {
    const els = document.querySelectorAll('.grid__img[data-bg]');
    if (!els.length) return;

    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (!e.isIntersecting) return;
        const el = e.target;
        const url = el.dataset.bg;
        if (url) {
          el.style.backgroundImage = `url(${url})`;
          el.removeAttribute('data-bg');
        }
        io.unobserve(el);
      });
    }, { rootMargin: '200px' });

    els.forEach(el => io.observe(el));
  }

  // ---------------------------------------------------------------------------
  // Animations
  // ---------------------------------------------------------------------------
  function animateHeader() {
    const frame = document.querySelector('.frame');
    const title = frame?.querySelector('.frame__title');
    if (!frame || !title) return;

    if (prefersReducedMotion) {
      gsap.from(frame, {
        autoAlpha: 0,
        duration: .6,
        ease: 'power1.out',
        scrollTrigger: { trigger: frame, start: 'top 95%' }
      });
      return;
    }

    gsap.timeline({
      defaults: { ease: 'none' },
      scrollTrigger: {
        trigger: frame,
        start: 'top top',
        end: 'bottom top',
        scrub: true,
        invalidateOnRefresh: true
      }
    })
    .to(frame, { opacity: 0.38, yPercent: 14 }, 0)
    .to(title, { xPercent: -80 }, 0);
  }

  function animateGrids() {
  const mq = matchMedia('(max-width:768px)');
  const isMobile = () => mq.matches;

  const modes = {
    second: { endDesk: '+=250%', endMob: '+=140%', scrubDesk: .5,  scrubMob: .25 },
    fifth:  { endDesk: '+=250%', endMob: '+=150%', scrubDesk: .3,  scrubMob: .2  },
    sixth:  { endDesk: '+=180%', endMob: '+=120%', scrubDesk: .6,  scrubMob: .4  },
    ninth:  { endDesk: '+=210%', endMob: '+=130%', scrubDesk: .45, scrubMob: .32 }
  };

  function defaultEndPx(mode, grid) {
    const count = grid.querySelectorAll('.grid__img').length || 6;
    const section = grid.closest('section') || grid.parentNode;
    const hasCaption = !!section.querySelector('.content__title, .grid-head, .grid-caption');
    const cfg = ({
      second: { base:{d:220,m:140}, per:{d:10,m:7}, cap:{d:12,m:8} },
      fifth:  { base:{d:240,m:150}, per:{d:8, m:5}, cap:{d:10,m:6} },
      sixth:  { base:{d:180,m:120}, per:{d:6, m:4}, cap:{d:10,m:6} },
      ninth:  { base:{d:210,m:130}, per:{d:6, m:4}, cap:{d:12,m:8} }
    })[mode] || { base:{d:200,m:120}, per:{d:6,m:4}, cap:{d:0,m:0} };

    const tilesOverMin = Math.max(0, count - 4);
    const vh = (isMobile() ? cfg.base.m : cfg.base.d) +
               tilesOverMin * (isMobile() ? cfg.per.m : cfg.per.d) +
               (hasCaption ? (isMobile() ? cfg.cap.m : cfg.cap.d) : 0);
    return `+=${Math.round(window.innerHeight * (vh/100))}`;
  }
  const parseScrub = (v, fb) => {
    if (v == null || v === '') return fb;
    if (v === 'true') return true;
    if (v === 'false') return false;
    const n = parseFloat(v);
    return isNaN(n) ? fb : n;
  };

  const pinType    = matchMedia('(pointer:coarse), (max-width:768px)').matches ? 'fixed' : 'transform';
  const anticipate = matchMedia('(pointer:coarse), (max-width:768px)').matches ? .4 : 1.2;

  const grids = [...document.querySelectorAll(
    '[data-grid-second],[data-grid-fifth],[data-grid-sixth],[data-grid-ninth]'
  )];

  grids.forEach(grid => {
    const imgs  = grid.querySelectorAll('.grid__img');
    const items = grid.querySelectorAll('.grid__item');
    if (!imgs.length && !items.length) return;

    const section = grid.closest('section') || grid.parentNode;
    const hasHead = !!section.querySelector('.grid-head');

    // ✅ Only pin the grid if the section has a title header; otherwise pin the whole section (old behavior)
    const pinTarget = hasHead ? grid : section;

    const defaultMode =
      grid.hasAttribute('data-grid-second') ? 'second' :
      grid.hasAttribute('data-grid-fifth')  ? 'fifth'  :
      grid.hasAttribute('data-grid-sixth')  ? 'sixth'  : 'ninth';

    const d = grid.dataset;
    const mode = d.mode || defaultMode;

    const end = () => (isMobile() ? d.endMobile : d.endDesktop) || defaultEndPx(mode, grid);

    const base = modes[mode] || modes.ninth;
    const fallbackScrub = isMobile() ? base.scrubMob : base.scrubDesk;
    const scrub = parseScrub(isMobile() ? d.scrubMobile : d.scrubDesktop, fallbackScrub);

    const tl = gsap.timeline({
      defaults: { ease: (mode === 'sixth' ? 'none' : 'power3') },
      scrollTrigger: {
        trigger: section,            // start/end based on the section
        start: 'top top',
        end,
        pin: pinTarget,              // 👈 key change
        pinType,
        pinReparent: true,
        scrub,
        anticipatePin: anticipate,
        pinSpacing: true,
        invalidateOnRefresh: true
      }
    });

    // animations unchanged …
    if (mode === 'second') {
      const mid = Math.floor(imgs.length / 2);
      tl.from(imgs, {
        stagger: { amount: .3, from: 'center' },
        y: () => innerHeight,
        transformOrigin: '50% 0%',
        rotation: (i) => (i < mid ? -1 : 1) * Math.abs(i - mid) * (matchMedia('(max-width:768px)').matches ? 1.5 : 3)
      }).from(items, {
        stagger: { amount: .3, from: 'center' },
        yPercent: 100,
        autoAlpha: 0
      }, 0);
    }
    if (mode === 'fifth') {
      tl.set(grid, { perspective: 1000 }).from(imgs, {
        stagger: { amount: .4, from: 'random', grid: [4, 9] },
        y: () => innerHeight,
        rotationX: matchMedia('(max-width:768px)').matches ? -40 : -70,
        transformOrigin: '50% 0%',
        z: matchMedia('(max-width:768px)').matches ? -450 : -900,
        autoAlpha: 0
      });
    }
    if (mode === 'sixth') {
      tl.from(imgs, {
        stagger: { amount: .25, from: 'edges', grid: [3, 3] },
        scale: matchMedia('(max-width:768px)').matches ? .82 : .7,
        autoAlpha: 0
      }).from(grid, {
        scale: matchMedia('(max-width:768px)').matches ? .92 : .85,
        skewY: matchMedia('(max-width:768px)').matches ? 1.5 : 3
      }, 0);
    }
    if (mode === 'ninth') {
      tl.from(imgs, {
        transformOrigin: '100% -450%',
        stagger: .07,
        scaleX: 1.02,
        skewX: matchMedia('(max-width:768px)').matches ? 7 : 15,
        xPercent: matchMedia('(max-width:768px)').matches ? 18 : 50,
        rotation: matchMedia('(max-width:768px)').matches ? -5 : -10,
        autoAlpha: 0
      });
      const headCap   = section.querySelector('.content__title, .grid-head');
      const bottomCap = section.querySelector('.grid-caption');
      if (headCap)   tl.from(headCap,   { autoAlpha: 0, yPercent: 30, immediateRender: false }, 0.15);
      if (bottomCap) tl.from(bottomCap, { autoAlpha: 0, yPercent: 20, immediateRender: false }, 0.35);
    }
  });
}


  function animateProcess() {
    document.querySelectorAll('[id$="-process"]').forEach(process => {
      const intro = process.querySelector('.project--intro');
      const details = gsap.utils.toArray(process.querySelectorAll('.project--details'));
      if (prefersReducedMotion) {
        intro && gsap.from(intro, {
          autoAlpha: 0, y: 16, duration: .35,
          scrollTrigger: { trigger: intro, start: 'top 90%' }
        });
        details.length && gsap.from(details, {
          autoAlpha: 0, y: 14, duration: .3, stagger: .08,
          scrollTrigger: { trigger: process, start: 'top 85%' }
        });
        return;
      }
      intro && gsap.from(intro, {
        autoAlpha: 0, y: 24, duration: .6, ease: 'power2.out',
        scrollTrigger: { trigger: intro, start: 'top 80%' }
      });
      details.length && gsap.from(details, {
        autoAlpha: 0, y: 30, duration: .5, ease: 'power2.out', stagger: .12,
        scrollTrigger: { trigger: process, start: 'top 75%', end: 'bottom 30%' }
      });
    });
  }

  function animateStacks() {
    document.querySelectorAll('.stacked-section [data-stack]').forEach(section => {
      const frames = section.querySelectorAll('.stacked-img');
      if (prefersReducedMotion) {
        gsap.from(frames, {
          autoAlpha: 0, y: 20, duration: .4, stagger: .08, ease: 'power1.out',
          scrollTrigger: { trigger: section, start: 'top 85%' }
        });
        return;
      }
      frames.forEach(el => {
        gsap.from(el, {
          autoAlpha: 0, y: 36, duration: .7, ease: 'power2.out',
          scrollTrigger: { trigger: el, start: 'top 85%' }
        });
        const img = el.querySelector('img');
        img && gsap.to(img, {
          yPercent: -8, ease: 'none',
          scrollTrigger: { trigger: el, start: 'top bottom', end: 'bottom top', scrub: true }
        });
      });
    });
  }

  // ---------------------------------------------------------------------------
  // Cursor + Confetti + UX jump
  // ---------------------------------------------------------------------------
  function initCursor() {
    if (!matchMedia('(pointer:fine)').matches || prefersReducedMotion) return;
    document.documentElement.classList.add('has-cursor');

    if (!document.getElementById('gc-goo-defs')) {
      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      svg.id = 'gc-goo-defs';
      svg.setAttribute('width', '0');
      svg.setAttribute('height', '0');
      svg.innerHTML = `<defs><filter id="gc-goo"><feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur"/><feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 20 -10" result="goo"/><feBlend in="SourceGraphic" in2="goo"/></filter></defs>`;
      document.body.appendChild(svg);
    }

    document.querySelectorAll('.gooey-cursor').forEach(n => n.remove());
    const wrap = document.createElement('div');
    wrap.className = 'gooey-cursor';
    wrap.setAttribute('aria-hidden', 'true');
    document.body.appendChild(wrap);

    const N = 20;
    const LERP = .35;
    const LINK_SHRINK = 0.55;
    let hoverBoost = 1;

    for (let i = 0; i < N; i++) {
      const d = document.createElement('div');
      d.className = 'gc-dot';
      wrap.appendChild(d);
    }
    const dots = Array.from(wrap.children);

    let mx = innerWidth / 2,
        my = innerHeight / 2;
    const hist = Array.from({ length: N }, () => ({ x: mx, y: my }));

    addEventListener('pointermove', (e) => {
      mx = e.clientX; my = e.clientY;
    }, { passive: true });

    let cursorRAF;

    function tick() {
      hist.shift();
      hist.push({ x: mx, y: my });
      for (let i = 0; i < N; i++) {
        const c = hist[i], n = hist[i + 1] || hist[N - 1];
        c.x += (n.x - c.x) * LERP;
        c.y += (n.y - c.y) * LERP;

        const base = i / N;
        const scale = (i === N - 1) ? base * hoverBoost : base;

        dots[i].style.transform = `translate(${c.x}px, ${c.y}px) translate(-50%, -50%) scale(${scale})`;
      }
      cursorRAF = requestAnimationFrame(tick);
    }
    cursorRAF = requestAnimationFrame(tick);

    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        if (cursorRAF) cancelAnimationFrame(cursorRAF);
        cursorRAF = null;
      } else {
        cursorRAF = requestAnimationFrame(tick);
      }
    }, { passive: true });

    const isLink = (t) => t && (t.closest('a[href]') || t.closest('[role="link"]'));
    const isNavLink = (t) => t && (t.closest('nav') || t.closest('.frame__links') || t.closest('.frame__tags'));

    document.addEventListener('pointerover', (e) => {
      if (isLink(e.target) && !isNavLink(e.target)) hoverBoost = LINK_SHRINK;
    }, true);

    document.addEventListener('pointerout', (e) => {
      if (isLink(e.target) && !isNavLink(e.target)) hoverBoost = 1;
    }, true);
  }

  function initConfetti() {
    const sup = document.querySelector('.heading-chant .confetti-sup');
    if (!sup) return;

    const emitter = sup.querySelector('span.emitter');
    const physicsAvailable = !!(window.Physics2DPlugin || (gsap.plugins && gsap.plugins.Physics2DPlugin));
    if (!physicsAvailable) return;

    function particles(parent, qty, x, y, minA, maxA) {
      const colors = ['#FFFF04', '#EA4C89', '#892AB8', '#4AF2FD'];
      for (let i = 0; i < qty; i++) {
        const angle = gsap.utils.random(minA, maxA);
        const velocity = gsap.utils.random(70, 140);
        const dot = document.createElement('div');
        dot.style.setProperty('--b', colors[(Math.random() * colors.length) | 0]);
        parent.appendChild(dot);

        gsap.set(dot, { opacity: 0, x, y, scale: gsap.utils.random(.4, .8), rotation: gsap.utils.random(0, 360) });
        gsap.timeline({ onComplete: () => dot.remove() })
          .to(dot, { opacity: 1, duration: .06 }, 0)
          .to(dot, {
            duration: 1.8,
            rotationX: `-=${gsap.utils.random(720,1440)}`,
            rotationZ: `+=${gsap.utils.random(720,1440)}`,
            physics2D: { angle, velocity, gravity: 120 }
          }, 0)
          .to(dot, { opacity: 0, duration: 1 }, .8);
      }
    }

    function burst(q = 80, minA = -95, maxA = -35) {
      particles(emitter, q, 0, 0, minA, maxA);
      gsap.fromTo(sup, { scale: .96 }, { scale: 1, duration: .25, ease: 'elastic.out(1,.6)' });
    }

    // Click / keyboard / hover
    sup.addEventListener('click', () => burst());
    sup.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); burst(); }
    });
    if (!matchMedia('(prefers-reduced-motion: reduce)').matches && matchMedia('(pointer:fine)').matches) {
      let last = 0; const CD = 700;
      sup.addEventListener('mouseenter', () => {
        const now = performance.now();
        if (now - last < CD) return;
        last = now; burst(28, -100, -60);
      });
    }

    // Fire when #about enters view (with cooldown)
    if (typeof ScrollTrigger !== 'undefined' && !matchMedia('(prefers-reduced-motion: reduce)').matches) {
      const aboutEl = document.getElementById('about') || sup.closest('section') || sup;
      let lastBurst = 0;
      const COOLDOWN = 1200;

      const maybeBurst = () => {
        const now = performance.now();
        if (now - lastBurst < COOLDOWN) return;
        lastBurst = now;
        burst(54, -100, -35);
      };

      ScrollTrigger.create({
        trigger: aboutEl,
        start: 'top 80%',
        end: 'bottom top',
        onEnter: maybeBurst,
        onEnterBack: maybeBurst,
      });

      const r = aboutEl.getBoundingClientRect();
      if (r.top < innerHeight * 0.8 && r.bottom > 0) {
        setTimeout(maybeBurst, 350);
      }
    }
  }

  // Only attach to the actual anchor (avoid double semantics)
  function initDeadJump() {
    const link = document.querySelector('.frame__title .ux-dead-jump');
    const sections = Array.from(document.querySelectorAll('main > section'));
    const nextSection = () => sections[0] && sections[0].id !== 'about' ? sections[0] : sections[1] || sections[0];

    function jump(e) {
      e?.preventDefault?.();
      const t = nextSection();
      if (!t) return;
      const top = t.getBoundingClientRect().top + window.scrollY;
      window.scrollTo({ top, behavior: prefersReducedMotion ? 'auto' : 'smooth' });
    }
    if (!link) return;
    link.addEventListener('click', jump);
    link.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') jump(e);
    });
  }

  // ---------------------------------------------------------------------------
  // Case study timing overrides
  // ---------------------------------------------------------------------------
  function tuneCaseStudyTiming() {
    const mq = window.matchMedia('(max-width: 768px)');
    const isMobile = () => mq.matches;

    function setTiming(grid, { endDesk, endMob, scrubDesk, scrubMob, mode }) {
      if (mode) grid.dataset.mode = mode;
      if (endDesk) grid.dataset.endDesktop = endDesk;
      if (endMob) grid.dataset.endMobile = endMob;
      if (scrubDesk != null) grid.dataset.scrubDesktop = scrubDesk;
      if (scrubMob != null) grid.dataset.scrubMobile = scrubMob;
    }

    function calcEndPx(grid, { baseVH, perTileVH, minTiles = 4, captionBoostVH = 0 }) {
      const tiles = grid.querySelectorAll('.grid__img').length || minTiles;
      const tilesOverMin = Math.max(0, tiles - minTiles);
      const hasCaption = !!(grid.closest('section')?.querySelector('.content__title, .grid-head'));
      const totalVH = (isMobile() ? baseVH.mobile : baseVH.desktop) +
        tilesOverMin * (isMobile() ? perTileVH.mobile : perTileVH.desktop) +
        (hasCaption ? (isMobile() ? (captionBoostVH.mobile || 0) : (captionBoostVH.desktop || 0)) : 0);
      const px = Math.round(window.innerHeight * (totalVH / 100));
      return `+=${px}`;
    }

    document.querySelectorAll('#fintech [data-grid-ninth]').forEach(grid => {
      const end = calcEndPx(grid, {
        baseVH: { desktop: 120, mobile: 90 },
        perTileVH: { desktop: 10, mobile: 7 },
        captionBoostVH: { desktop: 12, mobile: 8 }
      });
      setTiming(grid, { mode: 'sixth', endDesk: end, endMob: end, scrubDesk: 0.55, scrubMob: 0.38 });
    });

    document.querySelectorAll('#fintech-discovery [data-grid-sixth]').forEach(grid => {
      const end = calcEndPx(grid, {
        baseVH: { desktop: 150, mobile: 110 },
        perTileVH: { desktop: 6, mobile: 4 }
      });
      setTiming(grid, { mode: 'ninth', endDesk: end, endMob: end, scrubDesk: 0.45, scrubMob: 0.32 });
    });

    document.querySelectorAll('#ecommerce [data-grid-ninth]').forEach(grid => {
      const end = calcEndPx(grid, {
        baseVH: { desktop: 135, mobile: 95 },
        perTileVH: { desktop: 8, mobile: 6 },
        captionBoostVH: { desktop: 10, mobile: 6 }
      });
      setTiming(grid, { endDesk: end, endMob: end, scrubDesk: 0.40, scrubMob: 0.28 });
    });

    document.querySelectorAll('#ecommerce-discovery [data-grid-sixth]').forEach(grid => {
      const end = calcEndPx(grid, {
        baseVH: { desktop: 175, mobile: 120 },
        perTileVH: { desktop: 6, mobile: 4.5 }
      });
      setTiming(grid, { endDesk: end, endMob: end, scrubDesk: 0.50, scrubMob: 0.35 });
    });
  }

  // =========================================================================== CONTENT MODEL (unchanged)
  const CONTENT = {
    header: {
      title: 'UX is dead.',
      logo: "ZCKGRT",
      subline: "DIGITAL EXPERIENCE DESIGNER",
      links: [
        { label: 'FAQ', href: 'https://zackgort.com/faq' },
        { label: 'Résumé', href: 'https://zackgort.com/resume' },
        { label: 'LinkedIn', href: 'https://linkedin.com/in/zackgort' }
      ],
      tags: [
        { label: "#About", href: "#about" },
        { label: "#Work", href: "#work", settle: "end" },
        { label: "#Product", href: "#fintech", settle: "end" },
        { label: "#Ecommerce", href: "#ecommerce", settle: "end" },
        { label: "#Connect", href: "#contact", settle: "end" }
      ]
    },
    about: {
      heading: "¡Viva la XP!",
      sup: "experience",
      byline: "— Zack Gort, Senior <span class=\"blackout blackout--blur tip tip--full\" tabindex=\"0\" data-tip=\"user is kind of implied, no?\"><span>User</span></span> Experience Designer",
      copy: [
        "I think. I make. I think about design and data as systems. I think about business requirements and better ways to build. I think about form and function.",
        "I make things too. I've made websites for people to find money. I've made websites for people to spend money. I've made websites for people to invest money.",
        "Now, as for design, I design those experiences :)"
      ],
      note: "— Disclaimer: <span class=\"blackout blackout--blur tip tip--full\" tabindex=\"0\" data-tip=\"I found a gsap library that intrigued me, read the documentation, decided I saw a potential fit for the type of story I wished to tell, stripped the demo down, rebuilt it in JS for efficiency, added ad hoc functionality + features, included idiosyncratic interactive 'easter eggs', and splashed on some visual fluff for good measure.\"><span>I didn't use AI to build this website. </span></span>",
    },
    skills: {
      cols: [
        {
          heading: "#SPECIALIZATIONS",
          items: [
            "User Experience Design",
            "Visual Interface Design",
            "Accessibility Compliance",
            "UX Research & Strategy",
            "+"
          ]
        },
        {
          heading: "#TOOLS",
          items: ["Figma, Adobe CS", "HTML/CSS/Js", "Pen & Paper", "Whiteboard", "+"]
        },
        {
          heading: "CURRENTLY",
          items: ["AI + Creative Coding", "Design Systems & Workflows", "+"]
        }
      ]
    },
    workSelect: {
      captionTitle: "select works",
      tiles: [
        "https://i.ibb.co/c3vLP47/image-445-min.png",
        "https://i.ibb.co/jJD2YPJ/image-438-min.png",
        "https://i.ibb.co/Ct9DZd9/image-442-min.png",
        "https://i.ibb.co/hsNwyLC/nav-1sec.gif",
        "https://i.ibb.co/x8Jy9P1f/11.webp"
      ],
      cards: [
        { title: "BNY Melon — Pershing X", href: "#fintech", glyph: "↓", settle: "end" },
        { title: "General Nutrition Centers {GNC}", href: "#ecommerce", glyph: "↓", settle: "end" },
        { title: "TikTok For Business", href: "https://www.tiktok.com/about?lang=en", ext: true, glyph: "↗" }
      ]
    },
    brandsGrid: {
      title: "#design",
      images: [
        "https://i.ibb.co/yBgB52s8/1-Na-ZV6rc-Ew-RT55p-R12-BY0jg.webp",
        "https://i.ibb.co/QdmJdXh/AM-wire.jpg",
        "https://i.ibb.co/0spCQB3/image-7-Copy.png",
        "https://i.ibb.co/ZG6v0p5/image-10.png",
        "https://i.ibb.co/9qFzTQH/tiktok-proto-gif.gif",

        "https://i.ibb.co/yPyHvw2/Screenshot-20230217-101719.png",
        "https://i.ibb.co/cX4QjFf/Screenshot-20230217-102232.png",
        "https://i.ibb.co/kzpT2Qr/tiktok3.webp",
        "https://i.ibb.co/0DPv3vQ/Frame-4349.png",
        "https://i.ibb.co/Jrb2Npd/image-020.png",

        "https://i.ibb.co/PhqGJgc/wovn-wireframes.jpg",
        "https://i.ibb.co/4Z3457T5/1-t-Yd-DX2-Ql-VLw-XI7gm3ev-MLw.webp",
        "https://i.ibb.co/kDXnBz5/1-p-XU6-Sp-Y7-Mx-MKiyf-VI-976g.gif",
        "https://i.ibb.co/X5NHxCV/image-414-min.png",
        "https://i.ibb.co/0VmJ708g/work3.webp",

        "https://i.ibb.co/cSQCgNQY/work1.webp",
        "https://i.ibb.co/7J9gLTRy/mask-group-68c4867fc5153.webp",
        "https://i.ibb.co/jk13J77g/frame-4348-68c4866f3d9d4.webp",
        "https://i.ibb.co/rft2bf0T/9.webp",
        "https://i.ibb.co/vx76zjgf/10.webp",

        "https://i.ibb.co/hsNwyLC/nav-1sec.gif",
        "https://i.ibb.co/qLPtQwx3/dana-mobile-68c4866ab0d77.webp",
        "https://i.ibb.co/5XBv9TX0/dana-mobile-mockup-68c4866c20dee.webp",
        "https://i.ibb.co/wNWFgHj2/dana-dana-mobile-nav-68c48669d96e6.webp",
        "https://i.ibb.co/xqfFFj48/browse-location-list-68c48666baf6e.webp",

      ],
    },
    agencyGrid: {
      title: "#agencylife",
      images: [
        "https://i.ibb.co/LXmyD2hq/IMG-20170104-184947-650.webp",
        "https://i.ibb.co/CpkzWmRn/IMG-20151206-143245434-01.webp",
        "https://i.ibb.co/q34v0ByL/IMG-20150419-175021862.jpg",

        "https://i.ibb.co/GQM6jmpJ/1-1gjr-Eff-Bio-JYo-EAv-MWHf-KQ.webp",
        "https://i.ibb.co/HpXh5NPN/IMG-20160407-150604368-1.jpg",

        "https://i.ibb.co/mCK7D4Xb/1-Oen-HCQm-Ga10wp-Cz-R8o9-Pt-A.webp",

        "https://i.ibb.co/jkcCXSkL/IMG-20150415-134735718.jpg",
        "https://i.ibb.co/c3vLP47/image-445-min.png",
        "https://i.ibb.co/RymyPtP/image-443-min.png",
        "https://i.ibb.co/Ct9DZd9/image-442-min.png"
      ],
    },
    fintech: {
      heroImages: [
        "https://i.ibb.co/XkM2hn8n/bny1.png",
        "https://i.ibb.co/vvMZmq94/bny2.png",
        "https://i.ibb.co/xS49C07B/bny3.png",
        "https://i.ibb.co/wZY2bhKF/bny4.png",
        "https://i.ibb.co/Z1tjz0t9/14.webp"
      ],
      heroCaption: { title: " ", subtitle: " " },
      process: {
        client: "BNY Melon — Pershing X",
        agency: "Publicis Sapient",
        role: [
          "Senior User Experience Designer, Product Design Lead (IA/flows) for Wove’s advisor experience.",
          "Partnered with PM, Tech Lead, Data, Compliance, and designers to ship unified, cross-workflow journeys."
        ],
        details: [
          ["Problem", "Advisors worked across many disconnected tools; context was lost and data had to be re-entered. We sought to flatten the experience through a uniform and interconnected dashboard"],
          ["Vision", "Build Wove, an industry-first platform that connects a client’s full financial picture with the tools advisors actually use, so work moves across modules without reentry."],
          ["My Contributions", "Information architecture, task and flow mapping, cross-module navigation, and component patterns that keep data alive across steps (no reentry)."],
          ["Outcome", "Wove launched with BNY Melon power, scale, and security, helping advisors work faster and serve more clients."]
        ]
      },
      discoveryImages: [
        "https://i.ibb.co/wZY2bhKF/bny4.png",
        "https://i.ibb.co/xS49C07B/bny3.png",
        "https://i.ibb.co/vvMZmq94/bny2.png",
        "https://i.ibb.co/XkM2hn8n/bny1.png",
        "https://i.ibb.co/FJNG1jC/14.jpg",
        "https://i.ibb.co/fxjgcYD/18.png",
        "https://i.ibb.co/gtQLYJQ/17.jpg",
        "https://i.ibb.co/Fgxcqj0/16.jpg",
        "https://i.ibb.co/dcXH5fn/13.jpg"
      ],
      insight: [
        ["Deep Dive", "No Artificial Intelligence Here"]
      ],
      insightAside: "This is important. This was only 2023 into 2024, before the buzzword craze and subsequent hype. But, while the world gets distracted by the wow-factor of AI developments, AI had ZERO part in any of this project. It was HUMAN blood, sweat, and copious amounts of caffeine that did the due diligence of analyzing every individual legacy application, mapping that **** out, socializing it with the team, and ultimately shipping a viable modernized financial product ecosystem to one of the largest banking entities in the world.",
      stack: [
        ["https://i.ibb.co/XkM2hn8n/bny1.png", "BNY 1"],
        ["https://i.ibb.co/vvMZmq94/bny2.png", "BNY 2"],
        ["https://i.ibb.co/xS49C07B/bny3.png", "BNY 3"],
        ["https://i.ibb.co/wZY2bhKF/bny4.png", "BNY 4"],
        ["https://i.ibb.co/HGv7ymj/4.jpg", "Account Opening"]
      ]
    },
    ecommerce: {
      heroImages: [
        "https://i.ibb.co/cSQCgNQY/work1.webp",
        "https://i.ibb.co/pBMMxY1Z/11.webp",
        "https://i.ibb.co/7N2rDqrN/8.webp",
        "https://i.ibb.co/vx76zjgf/10.webp",
        "https://i.ibb.co/rft2bf0T/9.webp",
      ],
      heroCaption: { title: " ", subtitle: " " },
      process: {
        client: "General Nutrition Centers (GNC)",
        agency: "Elva Design Group",
        titleLines: ["This is the Whey"],
        role: [
          "Senior User Experience Designer"
        ],
        details: [
          ["Problem", "As part of a total overhaul and overcoming a recent bankruptcy, GNC asked us to shake things up; providing them with a modern and modular e-commerce solution through a ground-up build on the Shopify platform."],
          ["Scope", "{We} dove deep into GNC's e-commerce ecosystem. From market research, to [client-supplied] user data, to wireframe feature prototyping; we built a modular component-based design system optimized for continued optimization."],
          ["Heavy lift. Huge Gains.", "Lead UX {IA/UI Prototypes/Design Systems}. Paired with PM, Dev Lead, Design Team and Client-Side Stakeholders. 12-week engagement meant tight cadence, fast-on-our-feet design + strategy, and weekly exec reviews."],
          ["What We Shipped", "{We} introduced a modern mobile-first navigation schema and retail taxonomy strategy that separated GNC not just from its competition, but all in the e-retail space."]
        ]
      },
      discoveryImages: [
        "https://i.ibb.co/ynjWYqv8/2.webp",
        "https://i.ibb.co/spHgPH6N/1.webp",
        "https://i.ibb.co/cXg5Phdc/3.webp",
        "https://i.ibb.co/99h2bQMh/6.webp",
        "https://i.ibb.co/gZ58PKyk/4.webp",
        "https://i.ibb.co/Y7pGqJ69/5.webp",
        "https://i.ibb.co/yB4RwkTf/7.webp",
        "https://i.ibb.co/cSQCgNQY/work1.webp",
        "https://i.ibb.co/pBMMxY1Z/11.webp",
        "https://i.ibb.co/7N2rDqrN/8.webp",
        "https://i.ibb.co/vx76zjgf/10.webp",
        "https://i.ibb.co/rft2bf0T/9.webp",
      ],
      insight: [
        ["Outcome", "The result helped GNC reclaim ~$500M in annual revenue."]
      ],
      insightAside: "if the bar ain't bending, you’re just pretending.",
      stack: [
        ["https://i.ibb.co/ynjWYqv8/2.webp",  "notes"],
        ["https://i.ibb.co/spHgPH6N/1.webp",  "research"],
        ["https://i.ibb.co/cXg5Phdc/3.webp",  "mobile commerce"],
        ["https://i.ibb.co/99h2bQMh/6.webp",  "product detail page"],
        ["https://i.ibb.co/gZ58PKyk/4.webp",  "mobile product detail"],
        ["https://i.ibb.co/Y7pGqJ69/5.webp",  "consumer engagement"],
        ["https://i.ibb.co/yB4RwkTf/7.webp",  "rewards program"],
        ["https://i.ibb.co/cSQCgNQY/work1.webp", "handheld"],
        ["https://i.ibb.co/pBMMxY1Z/11.webp", "mobile overview"],
        ["https://i.ibb.co/7N2rDqrN/8.webp",  "mobile closeup"],
        ["https://i.ibb.co/vx76zjgf/10.webp", "desktop navigation"],
        ["https://i.ibb.co/rft2bf0T/9.webp",  "desktop homepage"]
      ]
    },
    contact: {
      blurb: "Yeah, so if any creative teams out there are hiring, hmu. zack@reasonably.cc",
      email: "zack@reasonably.cc",
      linkedin: "https://www.linkedin.com/in/zackgort/"
    }
  };

  // ---------------------------------------------------------------------------
  // SKILL IMAGE MAP + helper (used by hover reveal)
  // ---------------------------------------------------------------------------
  const SKILL_IMG = {
    "User Experience Design": "https://i.ibb.co/kDXnBz5/1-p-XU6-Sp-Y7-Mx-MKiyf-VI-976g.gif",
    "Visual Interface Design": "https://i.ibb.co/hsNwyLC/nav-1sec.gif",
    "Accessibility Compliance": "https://i.ibb.co/Z69xjMQY/tiktok-cat.gif",
    "UX Research & Strategy": "https://i.ibb.co/pdc51pC/S1-Final-Homepage-Homepage-Narrative-Example.png",
    "Figma, Adobe CS": "https://i.ibb.co/yPyHvw2/Screenshot-20230217-101719.png",
    "HTML/CSS/Js": "https://i.ibb.co/PhqGJgc/wovn-wireframes.jpg",
    "Pen & Paper": "https://i.ibb.co/Z2tsks1/image-434-min.png",
    "Whiteboard": "https://i.ibb.co/ZW3j6T1/Photo-Selects-Sketch-Prep-1-1-Houghton-Nav.jpg",
    "AI + Creative Coding": "https://i.ibb.co/RCnjfFv/6105c90759377c59c854a562-ZAX02142.jpg",
    "Design Systems & Workflows": "https://i.ibb.co/McRbkzq/640cdd0717d12bcf72882e0f-6106ecd46ed1ff579fd6ed81-ZAX02288.jpg"
  };
  const imgFor = (label) => SKILL_IMG[label] || "https://i.ibb.co/cSQCgNQY/work1.webp";

  // ---------------------------------------------------------------------------
  // RENDERER
  // ---------------------------------------------------------------------------
  function renderApp() {
    const app = $('#app');
    if (!app) return;
    app.innerHTML = '';

    // HEADER / FRAME
    const header = el('header', 'frame');
    header.innerHTML = `
      <h1 class="frame__title">
        <a class="ux-dead-jump" href="#about" aria-label="Jump to About">${CONTENT.header.title}</a>
      </h1>
      <div class="frame__subline type-tiny">
        <span>${CONTENT.header.subline}</span>
        <nav class="frame__links flex-line">
          ${CONTENT.header.links.map((l) => {
            const href = l.href || '#';
            const isInternal = href.startsWith('#') || href.startsWith('/');
            const attrs = [
              `href="${href}"`,
              !isInternal ? 'target="_blank" rel="noopener"' : '',
              l.tip ? 'class="nav-tip"' : '',
              l.tip ? `data-tip="${l.tip}"` : '',
              l.tip ? `title="${l.tip}"` : ''
            ].filter(Boolean).join(' ');
            return `<a ${attrs}>${l.label}</a>`;
          }).join('')}
        </nav>
      </div>
      <nav class="frame__tags flex-line type-tiny">
        ${CONTENT.header.tags.map(t => `<a href="${t.href}" ${t.settle?`data-settle="${t.settle}"`:''}>${t.label}</a>`).join('')}
      </nav>
      <span class="frame__logo">${CONTENT.header.logo}</span>
    `;
    app.appendChild(header);

    // ABOUT (hero)
    const about = el('section', 'content content--padded');
    about.id = 'about';
    about.innerHTML = `
      <h3 class="heading-chant">
        ${CONTENT.about.heading}
        <sup class="confetti-sup" role="button" tabindex="0" aria-label="${CONTENT.about.sup} (tap for confetti)">
          ${CONTENT.about.sup}
          <span class="emitter" aria-hidden="true"></span>
        </sup>
      </h3>
      <p class="type-tiny right end">${CONTENT.about.byline}</p>
    `;
    app.appendChild(about);

    // ABOUT — content
    const aboutContent = el('section', 'content content--padded');
    aboutContent.id = 'about-content';

    const aboutCopyHTML = (CONTENT.about.copy || [])
      .map(p => `<p>${p}</p>`)
      .join('');

    aboutContent.innerHTML = `
      <div class="content__title" style="margin:.25rem 0 .5rem"></div>
      <div class="content__text">
        ${aboutCopyHTML}
      </div>
      ${CONTENT.about.note
        ? `<p class="type-tiny right end" style="margin-top:.5rem; opacity:.85;">${CONTENT.about.note}</p>`
        : '' }
    `;
    app.appendChild(aboutContent);

    // SKILLS
    const skills = el('section', 'content content--padded');
    skills.id = 'skills';
    skills.innerHTML = `
      <div class="trio-grid">
        ${CONTENT.skills.cols.map(col => `
          <div class="trio-col">
            <h4 class="type-tiny">${col.heading}</h4>
            ${col.items.map(t => `
              <a class="content__text skills-link" data-fx="2" data-img="${imgFor(t)}" href="#" role="link" aria-label="${t}" onclick="return false;">
                <span>${t}</span>
              </a>
            `).join('')}
          </div>`).join('')}
      </div>
    `;
    app.appendChild(skills);

    // WORK SELECT
    const work = el('section', 'content content--padded');
    work.id = 'work';
    work.innerHTML = `
      <h2 class="content__title-main">${CONTENT.workSelect.captionTitle}</h2>
      <div class="grid grid--columns grid--spaced" data-grid-second>
        ${CONTENT.workSelect.tiles.map(src => `<div class="grid__img" data-bg="${src}"></div>`).join('')}
        ${CONTENT.workSelect.cards.map(c => `
          <div class="grid__item work-card">
            <h4 class="type-tiny">
              <a class="title-link"
                 href="${c.href}"
                 ${c.ext ? 'target="_blank" rel="noopener noreferrer"' : ''}
                 ${c.settle ? `data-settle="${c.settle}"` : ''}>
                 ${c.title}
              </a>
            </h4>
            <p>${c.glyph || ''}</p>
          </div>`).join('')}
      </div>
    `;
    app.appendChild(work);

    // BRANDS GRID (#design) — with sticky title above grid
    const brands = el('section', 'content content--padded content--full has-grid-head');
    brands.id = 'brands-grid';
    brands.innerHTML = `
    <div class="grid-head">
  <h2 class="grid-head__title content__title-main">#design</h2>
</div>
      <div class="grid grid--columns grid--spaced" data-grid-ninth>
        ${CONTENT.brandsGrid.images.map(src => `<div class="grid__img" data-bg="${src}"></div>`).join('')}
      </div>
      ${CONTENT.brandsGrid.names?.length ? `<p class="type-tiny grid-caption">${CONTENT.brandsGrid.names.join(' • ')}</p>` : ''}
    `;
    app.appendChild(brands); // ✅ append so it renders

    // AGENCY GRID (#agencylife) — with sticky title above grid
    const agency = el('section', 'content content--padded content--full has-grid-head');
    agency.id = 'brands-grid-2';
    agency.innerHTML = `
    <div class="grid-head">
  <h2 class="grid-head__title content__title-main">#agencylife</h2>
</div>
      <div class="grid grid--columns grid--spaced" data-grid-ninth>
        ${CONTENT.agencyGrid.images.map(src => `<div class="grid__img" data-bg="${src}"></div>`).join('')}
      </div>
      ${CONTENT.agencyGrid.names?.length ? `<p class="type-tiny grid-caption">${CONTENT.agencyGrid.names.join(' • ')}</p>` : ''}
    `;
    app.appendChild(agency); // ✅ append so it renders

    // FINTECH — HERO
    const finHero = el('section', 'content content--padded content--full');
    finHero.id = 'fintech';
    finHero.innerHTML = `
      <div class="grid grid--columns grid--spaced" data-grid-ninth>
        ${CONTENT.fintech.heroImages.map(src => `<div class="grid__img" data-bg="${src}"></div>`).join('')}
      </div>
      <div class="content__title">
        <h2 class="content__title-main">${CONTENT.fintech.heroCaption.title}</h2>
        <p class="type-tiny right end">${CONTENT.fintech.heroCaption.subtitle}</p>
      </div>
    `;
    app.appendChild(finHero);

    // FINTECH — PROCESS
    const finProc = el('section', 'content content--padded');
    finProc.id = 'fintech-process';
    const finIntro = `
      <section class="project project--intro">
        <span class="project__label project__label--name">Client</span>
        <span class="project__name">${CONTENT.fintech.process.client}</span>

        <span class="project__label project__label--date">Agency</span>
        <span class="project__date">${CONTENT.fintech.process.agency}</span>

        <h2 class="project__title"><span class="project__title-line">design systems, dashboards, data, & due diligence. </span></h2>

        <div class="project__mission content__text">
          <p>
            <span class="type-tiny" style="display:block; letter-spacing:.06em; text-transform:uppercase; opacity:.85; margin-bottom:.25rem;">
              Role
            </span>
            ${CONTENT.fintech.process.role[0]}
          </p>
          ${CONTENT.fintech.process.role.slice(1).map(p=>`<p>${p}</p>`).join('')}
        </div>
      </section>`;

    const finDetails = CONTENT.fintech.process.details.map(([label, text], i) => `
      <section class="project project--details ${i%2===0?'project--left':'project--right'}">
        <span class="project__label project__label--default">${label}</span>
        <p>${text}</p>
      </section>`).join('');
    finProc.innerHTML = finIntro + finDetails;
    app.appendChild(finProc);

    // FINTECH — DISCOVERY
    const finDisc = el('section', 'content content--full content--cutoff');
    finDisc.id = 'fintech-discovery';
    finDisc.innerHTML = `
      <div class="grid grid--spaced grid--zoomed" data-grid-sixth>
        ${CONTENT.fintech.discoveryImages.map(src => `<div class="grid__img" data-bg="${src}"></div>`).join('')}
      </div>`;
    app.appendChild(finDisc);

    // FINTECH — INSIGHT
    const finInsight = el('section', 'content content--padded');
    finInsight.id = 'fintech-insight';
    const finInsightParas = CONTENT.fintech.insight.map(([label, text]) => `
      <p>
        <span class="type-tiny" style="display:block; letter-spacing:.06em; text-transform:uppercase; opacity:.85; margin-bottom:.25rem;">
          ${label}
        </span>
        ${text}
      </p>
    `).join('');
    finInsight.innerHTML = `
      <div class="content__title" style="margin:.25rem 0 .5rem"></div>
      <div class="content__text">
        ${finInsightParas}
      </div>
    `;
    if (CONTENT.fintech.insightAside) {
      const aside = el('p', 'type-tiny right end insight-aside');
      aside.textContent = CONTENT.fintech.insightAside;
      finInsight.querySelector('.content__text').appendChild(aside);
    }
    app.appendChild(finInsight);

    // FINTECH — STACK
    const finStack = el('section', 'content content--full stacked-section');
    finStack.id = 'fintech-stack';
    finStack.innerHTML = `
      <div class="stacked-gallery" data-stack>
        ${CONTENT.fintech.stack.map(([src,alt]) => `<figure class="stacked-img"><img loading="lazy" decoding="async" fetchpriority="low" src="${src}" alt="${alt}"></figure>`).join('')}
      </div>`;
    app.appendChild(finStack);

    // ECOM — HERO
    const ecoHero = el('section', 'content content--padded content--full');
    ecoHero.id = 'ecommerce';
    ecoHero.innerHTML = `
      <div class="grid grid--columns grid--spaced" data-grid-ninth>
        ${CONTENT.ecommerce.heroImages.map(src => `<div class="grid__img" data-bg="${src}"></div>`).join('')}
      </div>
      <div class="content__title">
        <h2 class="content__title-main">${CONTENT.ecommerce.heroCaption.title}</h2>
        <p class="type-tiny right end">${CONTENT.ecommerce.heroCaption.subtitle}</p>
      </div>`;
    app.appendChild(ecoHero);

    // ECOM — PROCESS
    const ecoProc = el('section', 'content content--padded');
    ecoProc.id = 'ecommerce-process';
    const ecoIntro = `
      <section class="project project--intro">
        <span class="project__label project__label--name">Client</span>
        <span class="project__name">${CONTENT.ecommerce.process.client}</span>

        <span class="project__label project__label--date">Agency</span>
        <span class="project__date">${CONTENT.ecommerce.process.agency}</span>

        <h2 class="project__title">
          ${CONTENT.ecommerce.process.titleLines?.map(t=>`<span class="project__title-line">${t}</span>`).join('') || ''}
        </h2>

        <div class="project__mission content__text">
          <p>
            <span class="type-tiny" style="display:block; letter-spacing:.06em; text-transform:uppercase; opacity:.85; margin-bottom:.25rem;">
              Role
            </span>
            ${CONTENT.ecommerce.process.role[0] || ''}
          </p>
          ${(CONTENT.ecommerce.process.role || []).slice(1).map(p=>`<p>${p}</p>`).join('')}
        </div>
      </section>`;

    const ecoDetails = CONTENT.ecommerce.process.details.map(([label, text], i) => `
      <section class="project project--details ${i%2===0?'project--left':'project--right'}">
        <span class="project__label project__label--default">${label}</span>
        <p>${text}</p>
      </section>`).join('');
    ecoProc.innerHTML = ecoIntro + ecoDetails;
    app.appendChild(ecoProc);

    // ECOM — DISCOVERY
    const ecoDisc = el('section', 'content content--full content--cutoff');
    ecoDisc.id = 'ecommerce-discovery';
    ecoDisc.innerHTML = `
      <div class="grid grid--spaced grid--zoomed" data-grid-sixth>
        ${CONTENT.ecommerce.discoveryImages.map(src => `<div class="grid__img" data-bg="${src}"></div>`).join('')}
      </div>`;
    app.appendChild(ecoDisc);

    // ECOM — INSIGHT
    const ecoInsight = el('section', 'content content--padded');
    ecoInsight.id = 'ecommerce-insight';
    const ecoInsightParas = CONTENT.ecommerce.insight.map(([label, text]) => `
      <p>
        <span class="type-tiny" style="display:block; letter-spacing:.06em; text-transform:uppercase; opacity:.85; margin-bottom:.25rem;">
          ${label}
        </span>
        ${text}
      </p>
    `).join('');
    ecoInsight.innerHTML = `
      <div class="content__title" style="margin:.25rem 0 .5rem"></div>
      <div class="content__text">
        ${ecoInsightParas}
      </div>
    `;
    if (CONTENT.ecommerce.insightAside) {
      const aside = el('p', 'type-tiny right end insight-aside');
      aside.textContent = CONTENT.ecommerce.insightAside;
      ecoInsight.querySelector('.content__text').appendChild(aside);
    }
    app.appendChild(ecoInsight);

    // ECOM — STACK
    const ecoStack = el('section', 'content content--full stacked-section');
    ecoStack.id = 'ecommerce-stack';
    ecoStack.innerHTML = `
      <div class="stacked-gallery" data-stack>
        ${CONTENT.ecommerce.stack.map(([src,alt])=>`<figure class="stacked-img"><img loading="lazy" decoding="async" fetchpriority="low" src="${src}" alt="${alt}"></figure>`).join('')}
      </div>`;
    app.appendChild(ecoStack);

    // CONTACT
    const contact = el('section', 'content content--padded');
    contact.id = 'contact';
    contact.innerHTML = `
      <h4 class="type-tiny">CONTACT</h4>
      <p class="content__text">${CONTENT.contact.blurb}</p>`;
    app.appendChild(contact);

    // FOOTER (email → Back to top)
    const footer = el('footer', 'page-footer type-tiny');
    footer.innerHTML = `
      <span>Hey, nice to see you down here!</span>
      <span><a href="#" class="no-underline" id="backToTop">Back to top</a></span>
      <a href="${CONTENT.contact.linkedin}" target="_blank" rel="noopener">linkedin.com/in/zackgort</a>`;
    app.appendChild(footer);

    // Hook Back-to-top smooth scroll
    footer.querySelector('#backToTop')?.addEventListener('click', (e) => {
      e.preventDefault();
      if (window.lenis) window.lenis.scrollTo(0, { duration: 1 });
      else window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  }

  // --- NEW: Scroll progress (bar + % counter; hides near footer; smooth GSAP tween) ---
  function mountScrollProgress(){
    const nav = document.createElement('div');
    nav.className = 'navigation';
    nav.setAttribute('aria-hidden','true');
    nav.innerHTML = `
      <div class="nav-text">Scroll</div>
      <div class="nav-progress" aria-label="Scroll progress">
        <div class="nav-progress-fill" id="progressFill"></div>
      </div>
      <div class="nav-text" id="progressText">0%</div>
    `;
    document.body.appendChild(nav);

    const fill = nav.querySelector('#progressFill');
    const text = nav.querySelector('#progressText');

    const getMaxScroll = () =>
      Math.max(0, document.documentElement.scrollHeight - document.documentElement.clientHeight);

    let last = -1;
    const update = () => {
      const max = getMaxScroll();
      const y = window.scrollY || document.documentElement.scrollTop || 0;
      const p = max ? (y / max) : 0;
      const pct = Math.min(100, Math.max(0, Math.round(p * 100)));

      if (pct !== last) {
        // Smooth bar tween to keep in sync with the numeric %.
        gsap.to(fill, { scaleX: p, transformOrigin: 'left center', overwrite: 'auto', duration: 0.12, ease: 'none' });
        text.textContent = `${pct}%`;
        last = pct;
      }
    };

    update();
    addEventListener('scroll', update, { passive:true });
    addEventListener('resize', update);
    addEventListener('orientationchange', update);
    if (document.fonts?.ready) document.fonts.ready.then(update);

    // Avoid interfering with footer: fade/hide when footer enters viewport
    const footer = document.querySelector('.page-footer');
    if (footer && 'IntersectionObserver' in window) {
      const io = new IntersectionObserver(([entry]) => {
        // hide when any part of footer is visible
        nav.classList.toggle('is-hidden', entry.isIntersecting);
      }, { root: null, threshold: 0, rootMargin: '0px 0px -10% 0px' });
      io.observe(footer);
    }
  }

  // ---------------------------------------------------------------------------
  // SKILLS fx-2 HOVER / TAP REVEAL (desktop hover + mobile tap)
  // ---------------------------------------------------------------------------
  function initSkillsHoverReveal() {
    let root = document.getElementById('hoverReveal');
    if (!root) {
      root = document.createElement('div');
      root.id = 'hoverReveal';
      root.className = 'hover-reveal';
      root.setAttribute('aria-hidden', 'true');
      root.style.opacity = '0';
      root.innerHTML = `
        <div class="hover-reveal__inner">
          <div class="hover-reveal__deco"></div>
          <div class="hover-reveal__img"></div>
        </div>`;
      document.body.appendChild(root);
    }

    const imgBox = root.querySelector('.hover-reveal__img');

    const isTouch = matchMedia('(hover:none), (pointer:coarse)').matches;

    let isVisible = false;
    let token = 0;

    const follow = { x: innerWidth / 2, y: innerHeight / 2 };
    const pos = { x: follow.x, y: follow.y };
    const lerp = (a, b, t) => a + (b - a) * t;
    let raf;

    const PREVIEW_MARGIN = 16;
    function positionRootAt(x, y) {
      const rect = root.getBoundingClientRect();
      const w = rect.width  || 220;
      const h = rect.height || 160;

      let tx = x + PREVIEW_MARGIN;
      let ty = y - PREVIEW_MARGIN;

      tx = Math.min(Math.max(8, tx), innerWidth  - w - 8);
      ty = Math.min(Math.max(h + 8, ty), innerHeight - 8);

      gsap.set(root, { x: tx, y: ty, xPercent: 0, yPercent: -100 });
    }

    const tick = () => {
      pos.x = lerp(pos.x, follow.x, 0.16);
      pos.y = lerp(pos.y, follow.y, 0.16);
      positionRootAt(pos.x, pos.y);
      raf = requestAnimationFrame(tick);
    };

    const preload = (url) => new Promise((res, rej) => {
      imgBox.style.backgroundImage = `url(${url})`;
      const img = new Image();
      img.onload = () => res();
      img.onerror = rej;
      img.src = url;
    });

    let inTl, outTl;
    const killTL = () => { inTl && inTl.kill(); outTl && outTl.kill(); inTl = outTl = null; };

    const showFx2 = () => {
      killTL();
      isVisible = true;
      gsap.set(root, { autoAlpha: 1, scale: 1, rotation: 0 });
      inTl = gsap.timeline()
        .fromTo(root, { rotation: -6, yPercent: -92, scale: 0.92 }, { rotation: 0, yPercent: -100, scale: 1, duration: 0.6, ease: 'power3.out' }, 0)
        .fromTo(imgBox, { scale: 1.04 }, { scale: 1, duration: 0.5, ease: 'power2.out' }, 0);
    };

    const hide = () => {
      killTL();
      outTl = gsap.to(root, {
        autoAlpha: 0, scale: 0.98, rotation: -1, duration: 0.28, ease: 'power2.out',
        onComplete: () => { isVisible = false; }
      });
    };

    const cancelHover = () => {
      if (isTouch) return;
      if (isVisible) { token++; hide(); }
    };

    const skills = document.getElementById('skills');
    if (!skills) return;

    if (!isTouch) {
      raf = requestAnimationFrame(tick);
      addEventListener('pointermove', e => { follow.x = e.clientX; follow.y = e.clientY; }, { passive: true });

      skills.addEventListener('pointerenter', (e) => {
        const a = e.target.closest('.skills-link[data-img]');
        if (!a) return;
        const url = a.getAttribute('data-img');
        const myToken = ++token;
        preload(url).then(() => { if (myToken === token) showFx2(); }).catch(() => {});
      }, true);

      skills.addEventListener('pointerleave', (e) => { if (e.target.closest('.skills-link')) hide(); }, true);

      skills.addEventListener('focusin', (e) => {
        const a = e.target.closest('.skills-link[data-img]');
        if (!a) return;
        const r = a.getBoundingClientRect();
        positionRootAt(r.left + r.width/2, r.top + r.height/2);
        const url = a.getAttribute('data-img');
        const myToken = ++token;
        preload(url).then(() => { if (myToken === token) showFx2(); }).catch(() => {});
      });
      skills.addEventListener('focusout', (e) => { if (e.target.closest('.skills-link')) hide(); });

      ['scroll','wheel','touchstart','pointerdown','resize','orientationchange'].forEach(evt =>
        addEventListener(evt, cancelHover, { passive: true })
      );

    } else {
      let open = null;
      let lastDown = { x: innerWidth / 2, y: innerHeight / 2 };

      skills.addEventListener('pointerdown', (e) => {
        const a = e.target.closest('.skills-link');
        if (!a) return;
        lastDown = { x: e.clientX, y: e.clientY };
      }, true);

      skills.addEventListener('click', (e) => {
        const a = e.target.closest('.skills-link[data-img]');
        if (!a) return;
        e.preventDefault();

        const url = a.getAttribute('data-img');
        const myToken = ++token;

        const rect = a.getBoundingClientRect();
        const x = lastDown.x || (rect.left + rect.width / 2);
        const y = lastDown.y || (rect.top + rect.height / 2);
        positionRootAt(x, y);

        if (open === a) { hide(); open = null; return; }

        preload(url).then(() => {
          if (myToken !== token) return;
          showFx2();
          open = a;
        }).catch(() => {});
      }, true);

      const mobileCancel = () => { if (open) { hide(); open = null; } };
      ['scroll','wheel','touchstart','pointerdown','resize','orientationchange'].forEach(evt =>
        addEventListener(evt, mobileCancel, { passive: true })
      );

      const io = new IntersectionObserver(([entry]) => { if (!entry.isIntersecting) mobileCancel(); }, { threshold: 0 });
      io.observe(skills);

      skills.addEventListener('pointerdown', (e) => {
        const a = e.target.closest('.skills-link');
        if (a) a.blur();
      }, true);

      document.addEventListener('click', (e) => { if (open && !e.target.closest('.skills-link')) mobileCancel(); });
    }
  }

  // ---------------------------------------------------------------------------
  // Perf & platform helpers
  // ---------------------------------------------------------------------------
  function initVisibilityPerfGuards() {
    document.addEventListener('visibilitychange', () => {
      const hidden = document.hidden;
      if (hidden) {
        try { if (window.lenis) window.lenis.stop(); } catch {}
        try { gsap.ticker.sleep(); } catch {}
      } else {
        try { if (window.lenis) window.lenis.start(); } catch {}
        try {
          gsap.ticker.wake();
          if (window.ScrollTrigger) ScrollTrigger.refresh();
        } catch {}
      }
    }, { passive: true });

    const doPreload = () => {
      try { preloadImages('img'); } catch {}
    };
    if ('requestIdleCallback' in window) {
      requestIdleCallback(doPreload, { timeout: 1500 });
    } else {
      setTimeout(doPreload, 120);
    }
  }

  function supportsBackdropFilter() {
    try {
      return (CSS && (CSS.supports('backdrop-filter', 'blur(1px)') ||
        CSS.supports('-webkit-backdrop-filter', 'blur(1px)')));
    } catch {
      return false;
    }
  }

  function tuneForAndroid() {
    const isAndroid = /Android/i.test(navigator.userAgent);
    const dm = (navigator.deviceMemory || 8);
    const rs = document.documentElement.style;

    if (isAndroid || dm <= 4) {
      rs.setProperty('--layers', isAndroid ? '5' : '4');
      rs.setProperty('--blur-max', isAndroid ? '14' : '12');
      rs.setProperty('--saturate', '1');
    }

    if (matchMedia('(max-width:480px)').matches) {
      rs.setProperty('--layers', '4');
      rs.setProperty('--blur-max', '12');
    }

    if (!supportsBackdropFilter()) {
      document.querySelector('.blur')?.classList.add('no-bf');
    }
  }

  // ---------------------------------------------------------------------------
  // BOOT
  // ---------------------------------------------------------------------------
  async function start() {
    renderApp();
    initVisibilityPerfGuards();
    tuneForAndroid();
    initBlurOverlayVisibility();
    fixMobileBlurResume();

    initSmooth();
    enableHashScroll();

    // a11y + lazy bg setup
    a11yifyGridImages();
    initLazyBackgrounds();

    tuneCaseStudyTiming();

    animateHeader();
    animateGrids();
    animateProcess();
    animateStacks();
    initCursor();
    initConfetti();
    initDeadJump();

    // NEW: mount scroll progress UI
    mountScrollProgress();

    initSkillsHoverReveal();

    try { await preloadImages('img'); } catch (e) {}
    document.body.classList.remove('loading');

    if (window.ScrollTrigger) ScrollTrigger.refresh();
  }

  // Run AFTER all deferred vendor scripts are ready.
  window.addEventListener('load', () => { start(); }, { once: true });

})();

// Keep URL clean (no #hash)
const clearSlug = () => {
  try {
    history.replaceState(null, '', window.location.pathname + window.location.search);
  } catch {}
};
// If someone lands on /#about (shared link etc.), remove the hash but keep scroll
if (location.hash) clearSlug();
</script>

  </body>
</html>
